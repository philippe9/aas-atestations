<app-header></app-header>
<section class="container mt-4 pb-4">
  <div class="row mt-4">
    <div class="col-12 col-lg-3 mt-5 pt-5">
      <div class="card p-2">
        <ul class="list-group list-group-flush">
          <li aria-hidden="true" [class.active]="selectedMenu === 'myInfo'" (keyup)="navigateToMenu('myInfo')"
            (click)="navigateToMenu('myInfo')" class="rounded list-group-item list-group-item-action pointer">Mes
            informations</li>

          <li aria-hidden="true" [class.active]="selectedMenu === 'myOrders'" (keyup)="navigateToMenu('myOrders')"
            (click)="navigateToMenu('myOrders')" class="rounded list-group-item list-group-item-action pointer">Mes
            assurances</li>
          <li aria-hidden="true" [class.active]="selectedMenu === 'myAdresses'" (keyup)="navigateToMenu('myAdresses')"
            (click)="navigateToMenu('myAdresses')" class="rounded list-group-item list-group-item-action pointer">
            Services client</li>
          <li aria-hidden="true" (click)="logout()" class="rounded list-group-item list-group-item-action pointer">
            Deconnexion</li>
        </ul>
      </div>
    </div>
    <div class="col-12 col-lg-1"></div>
    <div class="col-12 col-lg-8 mt-5 pt-5">
      <section class="mes-infos" *ngIf="selectedMenu === 'myInfo'">
        <h2>Mes informations personnelles</h2>
        <div class="card w-100 p-4 mb-5">
          <h4>Modifier mes informations personnelles</h4>

          <form class="row" [formGroup]="accountForm" id="accountForm" #dialogFormTag="ngForm" [formGroup]="accountForm"
            (ngSubmit)="onSubmit(accountForm)">
            <div class="field col-12 col-lg-6 mb-2">
              <div class=" w-full">
                <label for="float-input">Nom</label>
                <input class="w-full" id="nom" type="text" pInputText [formControlName]="'nom'" />
              </div>
            </div>
            <div class="field col-12 col-lg-6 mb-2">
              <div class=" w-full">
                <label for="float-input">Prenom</label>
                <input class="w-full" type="text" pInputText [formControlName]="'prenom'" />
              </div>
            </div>
            <div class="field mb-2 col-12 col-lg-12">
              <div class=" w-full">
                <label for="float-input">Email</label>
                <input class="w-full" type="email" pInputText [formControlName]="'email_user'" />
              </div>
            </div>
            <div class="field mb-2 col-12 col-lg-12">

              <div class="flex flex-column gap-2 mt-3">
                <label htmlFor="Description" class="mb-1">Adresse</label>
                <textarea class="w-100" rows="5" cols="30" pInputTextarea></textarea>
              </div>
            </div>
            <div class="col-12 float-end">
              <button pButton class="float-end" pRipple type="button">Enregistrer</button>
            </div>
          </form>
        </div>
        <div class="card w-100 p-4 mb-5">
          <h4>Changer de mot de passe</h4>
          <form class="row" [formGroup]="accountForm" id="accountForm" #dialogFormTag="ngForm" [formGroup]="accountForm"
            (ngSubmit)="onSubmit(accountForm)">
            <div class="field col-12 col-lg-6 mb-2">
              <div class="p-float-label w-full">
                <input class="w-full" type="password" pInputText [formControlName]="'prenom'" />
                <label for="float-input"> Mot De Passe Actuel</label>
              </div>
            </div>
            <div class="field col-12 col-lg-6 mb-2">
              <div class="p-float-label w-full">
                <input class="w-full" type="password" pInputText [formControlName]="'prenom'" />
                <label for="float-input"> Nouveau Mot De Passe</label>
              </div>
            </div>
            <div class="field col-12 col-lg-6 mb-2">
              <div class="p-float-label w-full">
                <input class="w-full" type="password" pInputText [formControlName]="'prenom'" />
                <label for="float-input"> Confirmation</label>
              </div>
            </div>
            <div class="col-12 float-end">
              <button pButton class="float-end" pRipple type="button">Enregistrer</button>
            </div>
          </form>
        </div>
        <div class="card w-100 p-4 mb-5">
          <h4>Mes options de notification</h4>
          <form class="row" [formGroup]="accountForm" id="accountForm" #dialogFormTag="ngForm" [formGroup]="accountForm"
            (ngSubmit)="onSubmit(accountForm)">
            <div class="field col-12 col-lg-12 mb-2">
              <div class="mb-2">
                <p-inputSwitch></p-inputSwitch>
                <span class="ml-2">Je veux recevoir les mails pour les novelles offres ?</span>
              </div>
            </div>

            <div class="col-12 float-end">
              <button pButton class="float-end" pRipple type="button">Enregistrer</button>
            </div>
          </form>
        </div>
      </section>
      <section class="mes-commandes" *ngIf="selectedMenu === 'myOrders'">
        <h2>Mes commandes</h2>
        <div class="card">
          <p-table [rowHover]="true" [value]="commandes" [tableStyle]="{'min-width': '50rem'}">
            <ng-template pTemplate="header">
              <tr>
                <th>Commande</th>
                <th>Date</th>
                <th>Statut du paiement</th>
                <th>Mon releve</th>
                <th>Mon contrat</th>
              </tr>
            </ng-template>
            <ng-template pTemplate="body" let-commande>
              <tr class="pointer">
                <td>{{commande.id_commande}}</td>
                <td>{{commande.date_creation}}</td>
                <!-- <td>{{commande.date_creation | date:'d MMM y à H:mm'}}</td> -->
                <td *ngIf="commande.is_paid"> <p-tag severity="success" value="Payée" [rounded]="true"></p-tag>
                </td>
                <td *ngIf="!commande.is_paid"><p-tag severity="danger" value="Non-Payée" [rounded]="true"></p-tag></td>
                <td>{{commande.etat}}</td>
                <td><a *ngIf="commande.delivery_url" [href]="commande.delivery_url" target="_blank"> Lien de suivi</a>
                </td>
                <td>

                </td>
              </tr>
            </ng-template>
          </p-table>
        </div>
      </section>
      <section class="mes-adresses" *ngIf="selectedMenu === 'myAdresses'">
        <h2>Services client</h2>
        <!-- <div class="w-100 mb-3">
          <p-button (click)="openModalAdresseLivraison()" label="Ajouter une adresse de livraison"
            styleClass="p-button-outlined">
          </p-button>
        </div> -->
        <div class="w-100 mb-3"></div>
        <div class="card mb-2 p-3" *ngFor="let adresse of userAdresses">
          <div class="row">
            <!-- <div class="col-sm-12 col-lg-1 d-flex justify-content-center align-items-center">
              <p-radioButton [ngModelOptions]="{standalone: true}" name="userAdresses" [value]="adresse.id_adresse"
                [(ngModel)]="basket.id_adresse" [inputId]="adresse.id_adresse ?? '1'"
                (onClick)="updatedAdresse()"></p-radioButton>
            </div> -->
            <div class="col-sm-12 col-lg-8">
              <ul class="address livraison_address">
                <li class="address_firstname address_lastname">{{adresse.nom}} {{adresse.prenom}}</li>
                <li>{{adresse.ville}} , {{adresse.code_postal}}</li>
                <li>{{adresse.adresse}}</li>
                <li>{{adresse.appart}}</li>
                <li><br> <span id="phone">{{adresse.telephone}}</span></li>
              </ul>
            </div>
            <div class="col-sm-12 col-lg-2">
              <p-button label="Modifier" (click)="openModalAdresseLivraison(adresse)" styleClass="p-button-sm"
                icon="pi pi-file-edit" iconPos="right"></p-button>
            </div>

          </div>
        </div>
      </section>
    </div>
  </div>
</section>
<app-footer></app-footer>